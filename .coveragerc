[run]
# Only measure your source packages (prevents tests, tooling, site-packages from dragging % down)
source =
    core
    cli
    agents
branch = True
parallel = True
# Useful when pytest spawns multiple processes or when running in CI containers
concurrency = multiprocessing,thread
# Don’t try to trace venvs or common noise
omit =
    */tests/*
    */.venv/*

[paths]
# Combine coverage from local runs, containers, and CI (different path roots)
source =
    core
    */workspace/*/core
    */site-packages/*/core
    cli
    */workspace/*/cli
    */site-packages/*/cli
    agents
    */workspace/*/agents
    */site-packages/*/agents

[report]
show_missing = True
precision = 1
fail_under = 90
# Don’t penalize intentionally un-runnable lines
exclude_lines =
    pragma: no cover
    if TYPE_CHECKING:
    if __name__ == .__main__.:
    ^\s*raise NotImplementedError
    ^\s*pass$
    @abstractmethod

[html]
directory = coverage_html
title = Coverage Report

[xml]
output = coverage.xml
